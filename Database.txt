CREATE TABLE CUSTOMER (
    CusID	INT AUTO_INCREMENT PRIMARY KEY,
    CusFName	VARCHAR(20)	NOT NULL,
    CusLName  VARCHAR(20)	NOT NULL,
    Sex		CHAR(1)		,
    Tel		CHAR(10)	NOT NULL,
    Address	VARCHAR(100)	NOT NULL,
    UserName	VARCHAR(20) DEFAULT UUID()
);

CREATE TABLE CUSTOMER_ACCOUNT (
    UserName	VARCHAR(20) PRIMARY KEY DEFAULT UUID(),
    Password 	VARCHAR(255) NOT NULL,
    CusID	INT		NOT NULL,
    FOREIGN KEY (CusID) REFERENCES CUSTOMER(CusID)
);

ALTER TABLE CUSTOMER
ADD CONSTRAINT UserName FOREIGN KEY (UserName) REFERENCES CUSTOMER_ACCOUNT(UserName);

CREATE TABLE PRODUCT (
    ProID		INT AUTO_INCREMENT PRIMARY KEY,
    ProName 		CHAR(20)	NOT NULL,
    PricePerUnit  	DOUBLE(8,2)	NOT NULL,
    CostPerUnit	DOUBLE(8,2)	NOT NULL,
    StockQty 		INT		NOT NULL,
    Status VARCHAR(10) NOT NULL,
    Update_Day DATETIME    NOT NULL;
);

CREATE TABLE RECEIVE (
    RecID	CHAR(10) PRIMARY KEY DEFAULT UUID(),
    Period	DATETIME	NOT NULL,
    CusID	INT		NOT NULL,
    FOREIGN KEY (CusID) REFERENCES CUSTOMER(CusID)
);

CREATE TABLE RECEIVE_ORDER (
    RecID	CHAR(10)	NOT NULL,
    NumID	INT		NOT NULL,
    ProID	INT		NOT NULL, 
    Qty		INT		NOT NULL,
    FOREIGN KEY (RecID) REFERENCES RECEIVE(RecID)
    CONSTRAINT OrderList PRIMARY KEY (RecID, NumID)
);

CREATE TABLE HISTORY (
    HisID	CHAR(10) PRIMARY KEY DEFAULT UUID(),
    Period	DATETIME	NOT NULL,
    CusID	INT		NOT NULL,
    Status	VARCHAR(20)	NOT NULL,
    FOREIGN KEY (CusID) REFERENCES CUSTOMER(CusID)
);

CREATE TABLE HISTORY_ORDER (
    HisID	CHAR(10)	NOT NULL,
    NumID	INT		NOT NULL,
    ProID	INT		NOT NULL, 
    Qty		INT		NOT NULL,
    FOREIGN KEY (HisID) REFERENCES HISTORY(HisID)
    CONSTRAINT HistoryList PRIMARY KEY (HisID, NumID)
);
